<?php
session_start();

if (isset($_SESSION['turnManager'])) {
    $turnManager = $_SESSION['turnManager'];
    $currentPlayer = $turnManager->getCurrentPlayer();
    $turnNumber = $turnManager->getTurnNumber();

    $response = [
        'currentPlayer' => $currentPlayer->playerIdentifier,
        'turnNumber' => $turnNumber
    ];

    header('Content-Type: application/json');
    echo json_encode($response);
} else {
    header('Content-Type: application/json');
    echo json_encode(['status' => 'error', 'message' => 'TurnManager not initialized']);
}
?>